generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================================================
// PHASE 1: FOUNDATION MODELS - Enhanced User & Core Systems
// ============================================================================

model User {
  id                String    @id @default(uuid())
  email             String    @unique
  username          String?   @unique
  phoneNumber       String?   @unique
  
  // Personal Information
  firstName         String
  lastName          String
  displayName       String?
  bio               String?
  dateOfBirth       DateTime?
  gender            String?
  
  // Location & Contact
  country           String?
  state             String?
  city              String?
  address           String?
  timezone          String?
  
  // Professional Information
  title             String?
  hourlyRate        Decimal?
  availabilityStatus String?  @default("available")
  yearsOfExperience Int?
  
  // Media & Assets
  profileImageUrl   String?
  coverImageUrl     String?
  portfolioUrl      String?
  websiteUrl        String?
  
  // Verification & Security
  emailVerifiedAt   DateTime?
  phoneVerifiedAt   DateTime?
  kycVerifiedAt     DateTime?
  twoFactorEnabled  Boolean   @default(false)
  twoFactorSecret   String?
  
  // OAuth Integration
  googleId          String?   @unique
  appleId           String?   @unique
  linkedinId        String?   @unique
  authProvider      AuthProvider @default(LOCAL)
  
  // Account Management
  role              UserRole  @default(FREELANCER)
  status            UserStatus @default(ACTIVE)
  subscriptionTier  String?   @default("free")
  subscriptionExpiresAt DateTime?
  
  // Gamification
  level             Int       @default(1)
  experiencePoints  Int       @default(0)
  reputationScore   Decimal?  @default(0.00)
  
  // Tracking
  lastActiveAt      DateTime?
  lastLoginAt       DateTime?
  loginCount        Int       @default(0)
  
  // Metadata
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  deletedAt         DateTime?

  // Relations
  skills            UserSkill[]
  socialProfiles    UserSocialProfile[]
  jobs              Job[]
  applications      JobApplication[]
  clientProjects    Project[] @relation("ClientProjects")
  freelancerProjects Project[] @relation("FreelancerProjects")
  projectMembers    ProjectMember[]
  milestones        ProjectMilestone[]
  reviews           Review[] @relation("ReviewsByUser")
  reviewsReceived   Review[] @relation("ReviewsOfUser")
  conversations     ConversationParticipant[]
  messages          Message[]
  notifications     Notification[]
  wallets           Wallet[]
  transactions      Transaction[]
  paymentMethods    PaymentMethod[]
  challenges        Challenge[]
  challengeParticipants ChallengeParticipant[]
  challengeSubmissions ChallengeSubmission[]
  files             File[]
  portfolios        Portfolio[]
  achievements      UserAchievement[]
  analytics         UserAnalytics[]

  @@map("users")
}

model UserSkill {
  id                String    @id @default(uuid())
  userId            String
  skillName         String
  proficiencyLevel  Int       // 1-5 scale
  yearsExperience   Decimal?
  isVerified        Boolean   @default(false)
  verifiedBy        String?
  createdAt         DateTime  @default(now())

  // Relations
  user              User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  verifier          User?     @relation(fields: [verifiedBy], references: [id])

  @@map("user_skills")
}

model UserSocialProfile {
  id                String    @id @default(uuid())
  userId            String
  platform          String    // github, linkedin, behance, dribbble
  profileUrl        String
  username          String?
  isVerified        Boolean   @default(false)
  verificationData  Json?
  createdAt         DateTime  @default(now())

  // Relations
  user              User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("user_social_profiles")
}

// ============================================================================
// ENHANCED JOB SYSTEM
// ============================================================================

model Category {
  id          String    @id @default(uuid())
  name        String    @unique
  description String?
  icon        String?
  isActive    Boolean   @default(true)
  parentId    String?
  createdAt   DateTime  @default(now())

  // Relations
  parent      Category? @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children    Category[] @relation("CategoryHierarchy")
  jobs        Job[]

  @@map("categories")
}

model Job {
  id                String        @id @default(uuid())
  clientId          String
  categoryId        String?
  
  // Job Details
  title             String
  description       String
  requirements      String?
  deliverables      String?
  
  // Budget & Timeline
  budgetType        BudgetType    @default(FIXED)
  budgetMin         Decimal?
  budgetMax         Decimal?
  currency          String        @default("NGN")
  
  durationType      DurationType  @default(DAYS)
  estimatedDuration Int?
  deadline          DateTime?
  
  // Requirements
  experienceLevel   ExperienceLevel @default(INTERMEDIATE)
  requiredSkills    String[]
  preferredSkills   String[]
  
  // Job Settings
  visibility        JobVisibility @default(PUBLIC)
  isFeatured        Boolean       @default(false)
  isUrgent          Boolean       @default(false)
  autoAward         Boolean       @default(false)
  
  // Application Settings
  maxApplications   Int?
  applicationDeadline DateTime?
  
  // Status & Workflow
  status            JobStatus     @default(DRAFT)
  awardedTo         String?
  awardedAt         DateTime?
  startedAt         DateTime?
  completedAt       DateTime?
  
  // Attachments & Media
  attachments       Json          @default("[]")
  images            String[]
  
  // Analytics
  viewCount         Int           @default(0)
  applicationCount  Int           @default(0)
  
  // Metadata
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  deletedAt         DateTime?

  // Relations
  client            User          @relation(fields: [clientId], references: [id])
  category          Category?     @relation(fields: [categoryId], references: [id])
  awardedFreelancer User?         @relation(fields: [awardedTo], references: [id])
  applications      JobApplication[]
  project           Project?

  @@map("jobs")
}

model JobApplication {
  id                String              @id @default(uuid())
  jobId             String
  freelancerId      String
  
  // Application Details
  coverLetter       String
  proposedBudget    Decimal?
  proposedTimeline  Int?
  timelineUnit      String?
  
  // Attachments
  portfolioItems    Json              @default("[]")
  attachments       Json              @default("[]")
  
  // Status & Workflow
  status            ApplicationStatus @default(PENDING)
  clientFeedback    String?
  freelancerResponse String?
  
  // Timestamps
  submittedAt       DateTime          @default(now())
  reviewedAt        DateTime?
  respondedAt       DateTime?

  // Relations
  job               Job               @relation(fields: [jobId], references: [id], onDelete: Cascade)
  freelancer        User              @relation(fields: [freelancerId], references: [id], onDelete: Cascade)

  @@unique([jobId, freelancerId])
  @@map("job_applications")
}

// ============================================================================
// PROJECT MANAGEMENT SYSTEM
// ============================================================================

model Project {
  id                String          @id @default(uuid())
  jobId             String?         @unique
  clientId          String
  freelancerId      String
  
  // Project Details
  title             String
  description       String?
  requirements      String?
  
  // Financial
  agreedBudget      Decimal
  currency          String          @default("NGN")
  paymentSchedule   PaymentSchedule @default(MILESTONE)
  
  // Timeline
  startDate         DateTime?
  endDate           DateTime?
  estimatedHours    Int?
  
  // Status & Progress
  status            ProjectStatus   @default(PLANNING)
  progressPercentage Int           @default(0)
  
  // Contract Terms
  contractTerms     String?
  revisionLimit     Int             @default(3)
  revisionsUsed     Int             @default(0)
  
  // Deliverables
  deliverables      Json            @default("[]")
  finalDeliverables Json            @default("[]")
  
  // Metadata
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  completedAt       DateTime?

  // Relations
  job               Job?            @relation(fields: [jobId], references: [id])
  client            User            @relation("ClientProjects", fields: [clientId], references: [id])
  freelancer        User            @relation("FreelancerProjects", fields: [freelancerId], references: [id])
  members           ProjectMember[]
  milestones        ProjectMilestone[]
  conversations     Conversation[]
  reviews           Review[]

  @@map("projects")
}

model ProjectMember {
  id        String      @id @default(uuid())
  projectId String
  userId    String
  role      ProjectRole @default(MEMBER)
  joinedAt  DateTime    @default(now())

  // Relations
  project   Project     @relation(fields: [projectId], references: [id], onDelete: Cascade)
  user      User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([projectId, userId])
  @@map("project_members")
}

model ProjectMilestone {
  id                String            @id @default(uuid())
  projectId         String
  createdBy         String
  
  // Milestone Details
  title             String
  description       String?
  deliverables      String?
  
  // Financial
  amount            Decimal
  
  // Timeline
  dueDate           DateTime?
  orderIndex        Int
  
  // Status
  status            MilestoneStatus   @default(PENDING)
  submittedAt       DateTime?
  approvedAt        DateTime?
  paidAt            DateTime?
  
  // Feedback
  clientFeedback    String?
  freelancerNotes   String?
  
  // Attachments
  deliverableFiles  Json              @default("[]")
  
  createdAt         DateTime          @default(now())

  // Relations
  project           Project           @relation(fields: [projectId], references: [id], onDelete: Cascade)
  creator           User              @relation(fields: [createdBy], references: [id])

  @@map("project_milestones")
}

// ============================================================================
// FINANCIAL SYSTEM
// ============================================================================

model Wallet {
  id                    String        @id @default(uuid())
  userId                String
  
  // Balance Information
  availableBalance      Decimal       @default(0.00)
  pendingBalance        Decimal       @default(0.00)
  escrowBalance         Decimal       @default(0.00)
  totalEarned           Decimal       @default(0.00)
  totalWithdrawn        Decimal       @default(0.00)
  
  // Currency
  currency              String        @default("NGN")
  
  // Status
  status                WalletStatus  @default(ACTIVE)
  isVerified            Boolean       @default(false)
  
  // Limits
  dailyWithdrawalLimit  Decimal       @default(100000.00)
  monthlyWithdrawalLimit Decimal      @default(1000000.00)
  
  createdAt             DateTime      @default(now())
  updatedAt             DateTime      @updatedAt

  // Relations
  user                  User          @relation(fields: [userId], references: [id], onDelete: Cascade)
  transactions          Transaction[]

  @@unique([userId, currency])
  @@map("wallets")
}

model Transaction {
  id                String              @id @default(uuid())
  walletId          String?
  userId            String
  
  // Transaction Details
  type              TransactionType
  amount            Decimal
  currency          String              @default("NGN")
  description       String?
  
  // References
  referenceId       String?             @unique
  relatedEntityType String?
  relatedEntityId   String?
  
  // Payment Gateway
  gatewayProvider   String?
  gatewayReference  String?
  gatewayResponse   Json?
  
  // Status & Processing
  status            TransactionStatus   @default(PENDING)
  processedAt       DateTime?
  failedAt          DateTime?
  failureReason     String?
  
  // Fees
  platformFee       Decimal             @default(0.00)
  gatewayFee        Decimal             @default(0.00)
  netAmount         Decimal?
  
  // Metadata
  metadata          Json                @default("{}")
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt

  // Relations
  wallet            Wallet?             @relation(fields: [walletId], references: [id])
  user              User                @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("transactions")
}

model PaymentMethod {
  id                    String                @id @default(uuid())
  userId                String
  
  // Method Details
  type                  PaymentMethodType
  provider              String?
  
  // Bank Details
  bankName              String?
  bankCode              String?
  accountNumber         String?
  accountName           String?
  
  // Card Details (tokenized)
  cardLastFour          String?
  cardBrand             String?
  cardToken             String?
  
  // Mobile Money
  phoneNumber           String?
  networkProvider       String?
  
  // Status
  isVerified            Boolean               @default(false)
  isDefault             Boolean               @default(false)
  status                PaymentMethodStatus   @default(ACTIVE)
  
  // Verification
  verificationReference String?
  verifiedAt            DateTime?
  
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt

  // Relations
  user                  User                  @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("payment_methods")
}

// ============================================================================
// COMMUNICATION SYSTEM
// ============================================================================

model Conversation {
  id                String                    @id @default(uuid())
  
  // Conversation Type & Context
  type              ConversationType          @default(DIRECT)
  projectId         String?
  challengeId       String?
  
  // Conversation Details
  title             String?
  description       String?
  
  // Status
  status            ConversationStatus        @default(ACTIVE)
  
  // Last Activity
  lastMessageAt     DateTime?
  lastMessagePreview String?
  
  createdAt         DateTime                  @default(now())
  updatedAt         DateTime                  @updatedAt

  // Relations
  project           Project?                  @relation(fields: [projectId], references: [id])
  challenge         Challenge?                @relation(fields: [challengeId], references: [id])
  participants      ConversationParticipant[]
  messages          Message[]

  @@map("conversations")
}

model ConversationParticipant {
  id             String       @id @default(uuid())
  conversationId String
  userId         String
  joinedAt       DateTime     @default(now())
  lastReadAt     DateTime?

  // Relations
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  user           User         @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([conversationId, userId])
  @@map("conversation_participants")
}

model Message {
  id             String       @id @default(uuid())
  conversationId String
  senderId       String
  
  // Message Content
  content        String?
  messageType    MessageType  @default(TEXT)
  
  // Attachments
  attachments    Json         @default("[]")
  
  // Message Status
  isEdited       Boolean      @default(false)
  editedAt       DateTime?
  isDeleted      Boolean      @default(false)
  deletedAt      DateTime?
  
  // Threading
  replyToId      String?
  threadCount    Int          @default(0)
  
  createdAt      DateTime     @default(now())

  // Relations
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  sender         User         @relation(fields: [senderId], references: [id], onDelete: Cascade)
  replyTo        Message?     @relation("MessageReplies", fields: [replyToId], references: [id])
  replies        Message[]    @relation("MessageReplies")
  reads          MessageRead[]

  @@map("messages")
}

model MessageRead {
  id        String   @id @default(uuid())
  messageId String
  userId    String
  readAt    DateTime @default(now())

  // Relations
  message   Message  @relation(fields: [messageId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([messageId, userId])
  @@map("message_reads")
}

// ============================================================================
// FILE MANAGEMENT SYSTEM
// ============================================================================

model File {
  id                String         @id @default(uuid())
  uploadedBy        String?
  
  // File Details
  originalName      String
  fileName          String
  filePath          String
  fileSize          BigInt
  mimeType          String
  fileExtension     String?
  
  // File Type Classification
  fileCategory      FileCategory?
  
  // Storage Information
  storageProvider   String         @default("local")
  storagePath       String?
  cdnUrl            String?
  
  // Image/Video Metadata
  width             Int?
  height            Int?
  duration          Int?
  
  // Access Control
  visibility        FileVisibility @default(PRIVATE)
  accessToken       String?
  
  // Usage Tracking
  downloadCount     Int            @default(0)
  
  // Status
  status            FileStatus     @default(ACTIVE)
  
  // Virus Scanning
  isScanned         Boolean        @default(false)
  scanResult        String?
  scannedAt         DateTime?
  
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt

  // Relations
  uploader          User?          @relation(fields: [uploadedBy], references: [id])

  @@map("files")
}

// ============================================================================
// ENHANCED CHALLENGE SYSTEM
// ============================================================================

model Challenge {
  id                String              @id @default(uuid())
  createdBy         String
  sponsorId         String?
  
  // Challenge Details
  title             String
  description       String
  requirements      String
  judgingCriteria   String?
  
  // Categorization
  category          String
  difficultyLevel   DifficultyLevel     @default(INTERMEDIATE)
  tags              String[]
  
  // Prize Structure
  totalPrizePool    Decimal
  currency          String              @default("NGN")
  winnerDistribution Json?
  
  // Timeline
  registrationStart DateTime
  registrationEnd   DateTime
  submissionStart   DateTime
  submissionEnd     DateTime
  judgingEnd        DateTime
  
  // Participation
  maxParticipants   Int?
  minParticipants   Int                 @default(1)
  entryFee          Decimal             @default(0)
  
  // Challenge Settings
  isTeamChallenge   Boolean             @default(false)
  maxTeamSize       Int                 @default(1)
  submissionFormat  String?
  
  // Status & Visibility
  status            ChallengeStatus     @default(DRAFT)
  visibility        ChallengeVisibility @default(PUBLIC)
  isFeatured        Boolean             @default(false)
  
  // Resources
  starterFiles      Json                @default("[]")
  referenceMaterials Json               @default("[]")
  
  // Analytics
  viewCount         Int                 @default(0)
  participantCount  Int                 @default(0)
  submissionCount   Int                 @default(0)
  
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt

  // Relations
  creator           User                @relation(fields: [createdBy], references: [id])
  sponsor           User?               @relation(fields: [sponsorId], references: [id])
  participants      ChallengeParticipant[]
  submissions       ChallengeSubmission[]
  conversations     Conversation[]

  @@map("challenges")
}

model ChallengeParticipant {
  id            String              @id @default(uuid())
  challengeId   String
  userId        String
  teamName      String?
  
  // Registration
  registeredAt  DateTime            @default(now())
  entryFeePaid  Boolean             @default(false)
  paymentReference String?
  
  // Status
  status        ParticipantStatus   @default(REGISTERED)

  // Relations
  challenge     Challenge           @relation(fields: [challengeId], references: [id], onDelete: Cascade)
  user          User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  submissions   ChallengeSubmission[]

  @@unique([challengeId, userId])
  @@map("challenge_participants")
}

model ChallengeSubmission {
  id                String              @id @default(uuid())
  challengeId       String
  participantId     String
  
  // Submission Details
  title             String?
  description       String?
  submissionUrl     String?
  repositoryUrl     String?
  demoUrl           String?
  
  // Files & Media
  files             Json                @default("[]")
  images            String[]
  videos            String[]
  
  // Judging
  totalScore        Decimal             @default(0)
  judgeScores       Json                @default("[]")
  finalRank         Int?
  
  // Status
  status            SubmissionStatus    @default(SUBMITTED)
  isWinner          Boolean             @default(false)
  winnerPosition    Int?
  prizeAmount       Decimal?
  
  // Timestamps
  submittedAt       DateTime            @default(now())
  judgedAt          DateTime?

  // Relations
  challenge         Challenge           @relation(fields: [challengeId], references: [id], onDelete: Cascade)
  participant       ChallengeParticipant @relation(fields: [participantId], references: [id], onDelete: Cascade)

  @@unique([challengeId, participantId])
  @@map("challenge_submissions")
}

// ============================================================================
// NOTIFICATION SYSTEM
// ============================================================================

model Notification {
  id                String                @id @default(uuid())
  userId            String
  
  // Notification Details
  type              NotificationType
  title             String
  message           String
  
  // Action & Navigation
  actionUrl         String?
  actionText        String?
  
  // Related Entities
  relatedEntityType String?
  relatedEntityId   String?
  
  // Delivery Channels
  channels          NotificationChannel[] @default([IN_APP])
  
  // Status
  isRead            Boolean               @default(false)
  readAt            DateTime?
  
  // Delivery Status
  emailSent         Boolean               @default(false)
  emailSentAt       DateTime?
  pushSent          Boolean               @default(false)
  pushSentAt        DateTime?
  smsSent           Boolean               @default(false)
  smsSentAt         DateTime?
  
  // Priority
  priority          NotificationPriority  @default(NORMAL)
  
  // Metadata
  data              Json                  @default("{}")
  
  createdAt         DateTime              @default(now())
  expiresAt         DateTime?

  // Relations
  user              User                  @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("notifications")
}

// ============================================================================
// REVIEW SYSTEM
// ============================================================================

model Review {
  id                  String      @id @default(uuid())
  projectId           String?
  reviewerId          String
  revieweeId          String
  
  // Review Details
  overallRating       Int         // 1-5 scale
  communicationRating Int?        // 1-5 scale
  qualityRating       Int?        // 1-5 scale
  timelinessRating    Int?        // 1-5 scale
  
  // Review Content
  title               String?
  comment             String?
  
  // Review Type
  reviewType          ReviewType
  
  // Status
  status              ReviewStatus @default(ACTIVE)
  isFeatured          Boolean      @default(false)
  
  // Response
  response            String?
  respondedAt         DateTime?
  
  createdAt           DateTime     @default(now())
  updatedAt           DateTime     @updatedAt

  // Relations
  project             Project?     @relation(fields: [projectId], references: [id])
  reviewer            User         @relation("ReviewsByUser", fields: [reviewerId], references: [id])
  reviewee            User         @relation("ReviewsOfUser", fields: [revieweeId], references: [id])

  @@unique([projectId, reviewerId, revieweeId])
  @@map("reviews")
}

// ============================================================================
// PORTFOLIO SYSTEM
// ============================================================================

model Portfolio {
  id                String              @id @default(uuid())
  userId            String
  
  // Portfolio Details
  title             String
  description       String?
  category          String?
  tags              String[]
  
  // Project Information
  clientName        String?
  projectDuration   String?
  technologiesUsed  String[]
  
  // Media
  featuredImageId   String?
  images            String[]
  videos            String[]
  
  // Links
  liveUrl           String?
  repositoryUrl     String?
  caseStudyUrl      String?
  
  // Visibility & Status
  isFeatured        Boolean             @default(false)
  visibility        PortfolioVisibility @default(PUBLIC)
  status            PortfolioStatus     @default(ACTIVE)
  
  // Analytics
  viewCount         Int                 @default(0)
  likeCount         Int                 @default(0)
  
  // Display Order
  displayOrder      Int                 @default(0)
  
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt

  // Relations
  user              User                @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("portfolios")
}

// ============================================================================
// GAMIFICATION SYSTEM
// ============================================================================

model Achievement {
  id              String              @id @default(uuid())
  
  // Achievement Details
  name            String              @unique
  title           String
  description     String
  
  // Achievement Criteria
  category        AchievementCategory
  criteria        Json                // conditions to unlock
  
  // Rewards
  experiencePoints Int                @default(0)
  badgeIcon       String?
  badgeColor      String?
  
  // Rarity & Display
  rarity          AchievementRarity   @default(COMMON)
  displayOrder    Int                 @default(0)
  
  // Status
  isActive        Boolean             @default(true)
  
  createdAt       DateTime            @default(now())

  // Relations
  userAchievements UserAchievement[]

  @@map("achievements")
}

model UserAchievement {
  id              String      @id @default(uuid())
  userId          String
  achievementId   String
  
  // Achievement Progress
  progress        Int         @default(0)
  maxProgress     Int         @default(1)
  isCompleted     Boolean     @default(false)
  
  // Completion Details
  completedAt     DateTime?
  experienceEarned Int        @default(0)
  
  // Metadata
  metadata        Json        @default("{}")
  
  createdAt       DateTime    @default(now())

  // Relations
  user            User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  achievement     Achievement @relation(fields: [achievementId], references: [id], onDelete: Cascade)

  @@unique([userId, achievementId])
  @@map("user_achievements")
}

// ============================================================================
// ANALYTICS SYSTEM
// ============================================================================

model UserAnalytics {
  id              String    @id @default(uuid())
  userId          String
  
  // Date Tracking
  date            DateTime  @db.Date
  
  // Activity Metrics
  loginCount      Int       @default(0)
  sessionDuration Int       @default(0) // in minutes
  pageViews       Int       @default(0)
  
  // Job Metrics
  jobsApplied     Int       @default(0)
  jobsWon         Int       @default(0)
  jobsCompleted   Int       @default(0)
  
  // Financial Metrics
  earnings        Decimal   @default(0.00)
  withdrawals     Decimal   @default(0.00)
  
  // Engagement Metrics
  messagesSent    Int       @default(0)
  profileViews    Int       @default(0)
  
  createdAt       DateTime  @default(now())

  // Relations
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, date])
  @@map("user_analytics")
}

// ============================================================================
// ENUMS - Enhanced & New
// ============================================================================

// User Related Enums
enum UserRole {
  FREELANCER
  CLIENT
  ADMIN
  SUPER_ADMIN
}

enum UserStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
  BANNED
  PENDING_VERIFICATION
}

enum AuthProvider {
  LOCAL
  GOOGLE
  APPLE
  LINKEDIN
}

// Job Related Enums
enum BudgetType {
  FIXED
  HOURLY
}

enum DurationType {
  HOURS
  DAYS
  WEEKS
  MONTHS
}

enum ExperienceLevel {
  ENTRY
  INTERMEDIATE
  EXPERT
}

enum JobStatus {
  DRAFT
  OPEN
  IN_PROGRESS
  COMPLETED
  CANCELLED
  DISPUTED
}

enum JobVisibility {
  PUBLIC
  PRIVATE
  FEATURED
}

enum ApplicationStatus {
  PENDING
  ACCEPTED
  REJECTED
  WITHDRAWN
}

// Project Related Enums
enum ProjectStatus {
  PLANNING
  ACTIVE
  ON_HOLD
  COMPLETED
  CANCELLED
  DISPUTED
}

enum ProjectRole {
  OWNER
  ADMIN
  MEMBER
}

enum PaymentSchedule {
  UPFRONT
  MILESTONE
  COMPLETION
}

enum MilestoneStatus {
  PENDING
  IN_PROGRESS
  SUBMITTED
  APPROVED
  REJECTED
  PAID
}

// Challenge Related Enums
enum ChallengeStatus {
  DRAFT
  UPCOMING
  REGISTRATION_OPEN
  ACTIVE
  JUDGING
  COMPLETED
  CANCELLED
}

enum ChallengeVisibility {
  PUBLIC
  PRIVATE
  INVITE_ONLY
}

enum DifficultyLevel {
  BEGINNER
  INTERMEDIATE
  ADVANCED
  EXPERT
}

enum ParticipantStatus {
  REGISTERED
  ACTIVE
  SUBMITTED
  DISQUALIFIED
  WINNER
}

enum SubmissionStatus {
  DRAFT
  SUBMITTED
  UNDER_REVIEW
  ACCEPTED
  REJECTED
}

// Financial Enums
enum TransactionType {
  DEPOSIT
  WITHDRAWAL
  PAYMENT
  REFUND
  FEE
  BONUS
  PENALTY
}

enum TransactionStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
  REVERSED
}

enum WalletStatus {
  ACTIVE
  SUSPENDED
  CLOSED
}

enum PaymentMethodType {
  BANK_ACCOUNT
  CARD
  MOBILE_MONEY
  CRYPTO
}

enum PaymentMethodStatus {
  ACTIVE
  INACTIVE
  EXPIRED
  BLOCKED
}

// Communication Enums
enum ConversationType {
  DIRECT
  GROUP
  PROJECT
  SUPPORT
}

enum ConversationStatus {
  ACTIVE
  ARCHIVED
  BLOCKED
}

enum MessageType {
  TEXT
  IMAGE
  FILE
  AUDIO
  VIDEO
  SYSTEM
}

// Notification Enums
enum NotificationType {
  JOB_APPLICATION
  JOB_AWARDED
  PROJECT_UPDATE
  MESSAGE
  PAYMENT
  CHALLENGE
  SYSTEM
  MARKETING
}

enum NotificationChannel {
  IN_APP
  EMAIL
  PUSH
  SMS
}

enum NotificationPriority {
  LOW
  NORMAL
  HIGH
  URGENT
}

// File & Content Enums
enum FileCategory {
  PROFILE_IMAGE
  PORTFOLIO
  PROJECT_FILE
  MESSAGE_ATTACHMENT
  DOCUMENT
  OTHER
}

enum FileVisibility {
  PUBLIC
  PRIVATE
  RESTRICTED
}

enum FileStatus {
  ACTIVE
  DELETED
  QUARANTINED
}

enum PortfolioVisibility {
  PUBLIC
  PRIVATE
  CLIENTS_ONLY
}

enum PortfolioStatus {
  ACTIVE
  DRAFT
  ARCHIVED
}

// Review Enums
enum ReviewType {
  CLIENT_TO_FREELANCER
  FREELANCER_TO_CLIENT
}

enum ReviewStatus {
  ACTIVE
  HIDDEN
  DISPUTED
  REMOVED
}

// Gamification Enums
enum AchievementCategory {
  PROFILE
  JOBS
  EARNINGS
  SOCIAL
  CHALLENGES
  MILESTONES
}

enum AchievementRarity {
  COMMON
  UNCOMMON
  RARE
  EPIC
  LEGENDARY
}